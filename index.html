<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gil Nava Zaragoza | Switch Applications Engineer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Animate.css for preloader animation -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0F172A;
            color: #E2E8F0;
        }

        html {
            scroll-padding-top: 80px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -2.375rem;
            top: 0.25rem;
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 9999px;
            border: 4px solid #334155;
            background-color: #64748B;
            transition: all 0.3s ease;
        }

        .timeline-item.active::before {
            background-color: #3B82F6;
            border-color: #93C5FD;
        }

        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
        }

        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        /* Light mode overrides - apply to all backgrounds/texts */
        .light body {
            background-color: #F8FAFC !important;
            color: #0F172A !important;
        }

        .light #header,
        .light .bg-slate-950,
        .light .bg-slate-900,
        .light #footer,
        .light .bg-slate-950\/80 {
            background-color: #FFFFFF !important;
            color: #0F172A !important;
        }

        .light .text-slate-200 {
            color: #0F172A !important;
        }

        .light .text-slate-400 {
            color: #475569 !important;
        }

        .light .text-slate-300 {
            color: #334155 !important;
        }

        .light .text-slate-500 {
            color: #334155 !important;
        }

        .light .border-slate-800 {
            border-color: #E2E8F0 !important;
        }

        .light .bg-sky-600 {
            background-color: #0369A1 !important;
        }

        .light .bg-sky-700 {
            background-color: #075985 !important;
        }

        .light .timeline-item::before {
            border-color: #CBD5E1 !important;
            background-color: #94A3B8 !important;
        }

        .light #contact-modal {
            background-color: #F8FAFC !important;
        }

            .light #contact-modal .bg-slate-900 {
                background-color: #FFFFFF !important;
                color: #0F172A !important;
            }

        .light #footer {
            background-color: #F8FAFC !important;
            color: #475569 !important;
        }
        /* Preloader dark/light backgrounds */
        #loading {
            position: fixed;
            inset: 0;
            background-color: #0b1220;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            color: #E2E8F0;
        }

        .light #loading {
            background-color: #F8FAFC !important;
            color: #0F172A !important;
        }

        #loading-center {
            text-align: center;
        }

        #loading .load-box {
            display: inline-block;
            width: 72px;
            height: 72px;
            border-radius: 8px;
            background: linear-gradient(135deg,#1f2937,#374151);
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
        }

        .light #loading .load-box {
            background: linear-gradient(135deg,#e2e8f0,#f8fafc);
        }

        #loading .load-box::after {
            content: '';
            position: absolute;
            left: -40%;
            top: -40%;
            width: 180%;
            height: 180%;
            background: rgba(255,255,255,0.04);
            transform: rotate(45deg);
            animation: shimmer 1.6s linear infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%) rotate(45deg);
            }

            100% {
                transform: translateX(100%) rotate(45deg);
            }
        }

        #loading h2 {
            font-size: 1.25rem;
            letter-spacing: 0.02em;
            margin: .25rem 0 0;
        }

        #loading h6 {
            font-size: .9rem;
            color: #94A3B8;
            margin: 0;
        }

        .light #loading h6 {
            color: #475569 !important;
        }
        /* Theme toggle button styling */
        #theme-toggle {
            background: transparent;
            border: 1px solid rgba(226,232,240,0.06);
            padding: 0.4rem 0.6rem;
            border-radius: 0.5rem;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: inherit;
        }

            #theme-toggle svg {
                width: 20px;
                height: 20px;
            }

        /* Interest cards and profile hover animations */
        .profile-pic {
            width: 300px;
            height: 300px;
            object-fit: cover;
            border-radius: 50%;
            box-shadow: 0 0 0 8px #1e293b;
            object-position: top;
            display: block;
            transition: transform 220ms ease, box-shadow 220ms ease;
            will-change: transform;
        }

        @keyframes profile-pulse {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.06) rotate(-3deg); }
            60% { transform: scale(0.98) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        /* New simple move animation for profile pic hover */
        @keyframes profile-move-once {
            0% { transform: translateY(0); }
            20% { transform: translateY(-6px); }
            40% { transform: translateY(4px); }
            60% { transform: translateY(-3px); }
            80% { transform: translateY(2px); }
            100% { transform: translateY(0); }
        }
        /* Zoom animation (scale up then back) */
        @keyframes profile-zoom-once {
            0% { transform: scale(1); }
            35% { transform: scale(1.08); }
            60% { transform: scale(1.12); }
            100% { transform: scale(1); }
        }

        /* Center the interests parent container */
        .interests-parent {
            display: flex !important;
            justify-content: center !important;
            align-items: center !important;
            width: 100%;
        }
        .interest-row {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 2rem;
            width: 100%;
        }
        .interest-card {
            background: linear-gradient(180deg,#0570a8,#0984c6);
            padding: 2.5rem;
            border-radius: 1.5rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-width: 180px;
            min-height: 180px;
            cursor: pointer;
            box-shadow: 0 10px 32px rgba(2,6,23,0.45);
            isolation: isolate;
            transition: transform 0.3s, box-shadow 0.3s;
            margin: 0 0.5rem;
        }
        .interest-card img { width: 64px; height: 64px; filter: invert(1); }
        .interest-card p { margin-top: 1.25rem; color: #fff; font-weight:700; font-size:1.35rem; }
        .interest-card.selected, .interest-card:hover {
            animation: interest-bounce 0.6s;
            box-shadow: 0 0 0 6px #3B82F6, 0 10px 32px rgba(2,6,23,0.45);
            transform: scale(1.08);
        }
        @keyframes interest-bounce {
            0% { transform: scale(1); }
            30% { transform: scale(1.12); }
            60% { transform: scale(0.96); }
            100% { transform: scale(1.08); }
        }
        @media (max-width: 1024px) {
            .interest-card { min-width: 160px; min-height: 160px; padding: 2rem; }
            .interest-card img { width: 56px; height: 56px; }
            .interest-row { gap: 1.5rem; }
        }
        @media (max-width: 768px) {
            .interest-row { flex-direction: column; gap: 1rem; }
        }
        @media (max-width: 480px) {
            .interest-card { min-width: 100%; min-height: 120px; padding: 1.25rem; }
            .interest-card img { width: 40px; height: 40px; }
        }
        .heart-icon {
            display: inline-block;
            vertical-align: middle;
            margin-right: 0.5rem;
            width: 1.5em;
            height: 1.5em;
        }
        .heart-icon--small { width: 1.1em; height: 1.1em; }
        /* Skill bar hover effects */
        .skill-bar { position: relative; overflow: hidden; border-radius: 9999px; }
        .skill-bar .skill-fill { position: relative; z-index:1; transition: width .9s cubic-bezier(.4,0,.2,1), filter .4s, transform .4s; }
        .skill-bar::after { content:''; position:absolute; inset:0; background:linear-gradient(120deg,rgba(255,255,255,0.15),rgba(255,255,255,0)); opacity:0; transition:opacity .5s; pointer-events:none; }
        .skill-bar:hover::after { opacity:1; animation: sheen 1s ease; }
        .skill-bar:hover .skill-fill { filter: brightness(1.25) saturate(1.2); transform: translateY(-1px); }
        @keyframes sheen { 0% { transform: translateX(-60%); } 100% { transform: translateX(120%); } }
        /* Zoom effect for each skill row */
        .skill-item { transition: transform .35s cubic-bezier(.4,0,.2,1), filter .35s; will-change: transform; }
        .skill-item:hover { transform: scale(1.04); filter: brightness(1.08); }
        /* Education cards & diploma modal */
        .education-card { transition: transform .35s ease, box-shadow .4s ease; cursor: pointer; position:relative; }
        .education-card:hover { transform: translateY(-6px) scale(1.02); box-shadow: 0 16px 40px -10px rgba(0,0,0,.55); }
        #diploma-modal { animation: fadeIn .35s ease; }
        @keyframes fadeIn { from { opacity:0; } to { opacity:1; } }
        #diploma-modal .modal-panel { animation: pop .35s cubic-bezier(.4,0,.2,1); }
        @keyframes pop { 0% { transform: scale(.92); opacity:0; } 100% { transform: scale(1); opacity:1; } }
        #diploma-modal iframe { background:#0f172a; }
        /* Music panel */
        .music-panel {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translate(-50%, 12px);
            background: #0f1e33;
            border: 1px solid #1e293b;
            padding: 1rem 1.25rem;
            border-radius: 1rem;
            width: 260px;
            box-shadow: 0 12px 32px rgba(0,0,0,0.5);
            z-index: 20;
            animation: fadeSlide 0.35s ease;
        }
        /* When detached to body for collision avoidance */
        .music-panel.detached { position:absolute; top:auto; left:0; transform:none; width:260px; animation: fadeSlide 0.25s ease; }
        .music-panel.hidden { display: none; }
        .music-panel .panel-title { font-size: 0.95rem; letter-spacing: .05em; text-transform: uppercase; color:#93c5fd; margin-bottom: .75rem; font-weight:600; }
    /* Tennis video hover enlarge */
    #tennis-panel video { transition: transform 0.35s ease, box-shadow 0.35s ease; transform-origin: center center; }
    #tennis-panel video:hover { transform: scale(2); box-shadow: 0 6px 24px -4px rgba(0,0,0,0.5); z-index:70; position:relative; }
    #tennis-panel { overflow: visible; }
    /* Traveling thumbs hover enlarge */
    #traveling-panel .travel-thumb { position:relative; }
    #traveling-panel .travel-thumb img { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    #traveling-panel .travel-thumb:hover img { transform: scale(1.9); box-shadow:0 4px 18px -2px rgba(0,0,0,0.5); z-index:60; }
    #traveling-panel .mini-travel-grid { overflow: visible; }
        .artist-list { list-style: none; margin:0; padding:0; display:flex; flex-direction:column; gap:.4rem; }
        .artist-list li { padding:.45rem .6rem; border-radius:.5rem; cursor:pointer; font-size:.9rem; background:rgba(255,255,255,0.03); color:#e2e8f0; transition: background .25s, transform .25s; position:relative; }
        .artist-list li:hover { background: #1e3a8a; transform: translateX(4px); }
        @keyframes fadeSlide { from { opacity:0; transform: translate(-50%,0); } to { opacity:1; transform: translate(-50%,12px);} }
        @media (max-width:640px){ .music-panel { left:0; transform: translate(0,12px); width: 220px; } }
    /* Global image hover preview */
    #image-hover-preview { position:fixed; inset:auto; top:0; left:0; pointer-events:none; z-index:1000; display:none; border:1px solid #1e293b; background:#0f172a; padding:6px; border-radius:10px; box-shadow:0 8px 28px -6px rgba(0,0,0,0.55); max-width:80vw; max-height:80vh; }
    #image-hover-preview img { display:block; max-width:100%; max-height:100%; border-radius:6px; }
    .light #image-hover-preview { background:#ffffff; border-color:#cbd5e1; }
    /* Variable table quick panel */
    #table-panel { animation: fadeIn 0.25s ease; }
    #table-panel video { cursor:pointer; }
    #table-panel:hover { border-color: #0ea5e9; }
    #table-panel h4 { letter-spacing:.05em; }
    /* Playing zoom effect */
    .video-zoom-playing { transform: scale(1.05); transition: transform .6s ease; }
    .video-zoom-playing:hover { transform: scale(1.09); }
        /* Portfolio card custom darker blue for visibility in light mode */
        .portfolio-card-custom {
            background: linear-gradient(145deg,#0f2744,#133556 55%,#0d1e33);
            border: 1px solid rgba(59,130,246,0.35);
            position: relative;
        }
        .portfolio-card-custom:hover { border-color:#38bdf8; }
        .light .portfolio-card-custom {
            background: linear-gradient(145deg,#1e3a5c,#21476e 55%,#1a3352);
            border-color: rgba(30,64,175,0.55);
        }
        .light .portfolio-card-custom:hover { border-color:#0ea5e9; }
        .portfolio-card-custom::before {
            content:"";
            position:absolute; inset:0; border-radius:0.75rem; pointer-events:none;
            background:radial-gradient(circle at 28% 22%,rgba(255,255,255,0.08),transparent 60%);
            opacity:0; transition:opacity .4s ease;
        }
        .portfolio-card-custom:hover::before { opacity:1; }
        /* Fade-in class for smoother initial appearance */
        .fade-in {
            opacity: 0;
            animation: fadeIn 0.6s forwards;
        }

        @keyframes fadeIn {
            to {
                opacity: 1;
            }
        }
    </style>
</head>
<body class="antialiased fade-in">
    <header id="header" class="bg-slate-950/80 backdrop-blur-md sticky top-0 z-50 relative">
        <div class="absolute inset-0 -z-10 bg-cover bg-center opacity-35" style="background-image:url('background.jpg');"></div>
        <div class="absolute inset-0 -z-0 bg-slate-950/60 backdrop-blur-sm"></div>
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center relative">
            <h1 class="text-xl md:text-2xl font-bold text-slate-200">Gil Nava Zaragoza</h1>
            <ul class="hidden md:flex items-center">
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#professional-summary" class="font-medium text-slate-300 hover:text-white transition-colors">Summary</a>
                </li>
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#experience" class="font-medium text-slate-300 hover:text-white transition-colors">Experience</a>
                </li>
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#skills" class="font-medium text-slate-300 hover:text-white transition-colors">Skills</a>
                </li>
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#education" class="font-medium text-slate-300 hover:text-white transition-colors">Education</a>
                </li>
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#interests" class="font-medium text-slate-300 hover:text-white transition-colors">Interests</a>
                </li>
                <li class="px-4 relative after:content-[''] after:absolute after:right-0 after:top-1/2 after:-translate-y-1/2 after:h-6 after:w-px after:bg-slate-600/50 last:after:hidden">
                    <a href="#freelancer-portfolio" class="font-medium text-slate-300 hover:text-white transition-colors">FreeLancer Portafolio</a>
                </li>
                <li class="px-4 relative">
                    <a href="#certifications-section" class="font-medium text-slate-300 hover:text-white transition-colors">Certifications</a>
                </li>
            </ul>
            <div class="flex items-center gap-3">
                <button id="theme-toggle" aria-label="Toggle theme" title="Toggle light / dark mode" class="inline-flex">
                    <svg id="theme-icon" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" /></svg>
                    <span class="sr-only">Toggle theme</span>
                </button>
                <button id="open-contact-modal" class="hidden md:inline-block bg-sky-600 text-white font-semibold px-4 py-2 rounded-lg hover:bg-sky-700 transition-colors">Contact</button>
            </div>
            <div class="md:hidden">
                <button id="menu-btn" class="text-slate-200 focus:outline-none">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="#professional-summary" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Summary</a>
            <a href="#experience" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Experience</a>
            <a href="#skills" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Skills</a>
            <a href="#education" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Education</a>
            <a href="#interests" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800 flex items-center"><svg class="heart-icon" viewBox="0 0 24 24" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>Interests</a>
            <a href="#freelancer-portfolio" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">FreeLancer Portafolio</a>
            <a href="#certifications-section" class="block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Certifications</a>
            <button id="open-contact-modal-mobile" class="w-full text-left block py-2 px-4 text-sm text-slate-200 hover:bg-slate-800">Contact</button>
        </div>
    </header>
    <main class="container mx-auto px-6 py-12 md:py-20">
        <section id="summary" class="mb-16 md:mb-24 bg-slate-900 rounded-xl shadow-md py-12">
            <div class="flex flex-col md:flex-row items-center justify-center gap-12 max-w-5xl mx-auto">
                <div class="flex-shrink-0 flex justify-center items-center">
                    <img src="GNZ-CSAP.jpg" alt="Profile" class="profile-pic" />
                </div>
                <div class="flex-1 flex flex-col justify-center items-center">
                    <h2 id="professional-summary" class="text-4xl font-bold text-slate-200 mb-6 text-center">
                        <span class="inline-block align-middle" style="margin-right:0.5rem;vertical-align:middle;">
                            <img src="summary.png" alt="Summary Logo" style="height:48px;width:auto;display:inline-block;vertical-align:middle;" />
                        </span>
                        Professional Summary
                    </h2>
                    <p class="text-slate-300 text-lg leading-relaxed max-w-2xl text-justify">
                        Automotive systems engineer with 7+ years of experience in vehicle launches and system integration, specializing in software validation, controls, and automation. Proficient in programming and scripting with Python, MATLAB/Simulink, and C for developing diagnostic tools, automating test procedures, and analyzing large data sets. Skilled in CAD/CAE modeling, simulation, and validation, with hands-on expertise in troubleshooting complex embedded systems and control software. Strong background in powertrain calibration, infotainment connectivity, and switch/steering applications. Passionate about leveraging programming and software tools to optimize processes, reduce costs, and deliver reliable solutions in the automotive and technology industries.
                    </p>
                </div>
            </div>
        </section>
        <section id="experience" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-200 mb-12 text-center">
                <span class="inline-block align-middle" style="margin-right:0.5rem;vertical-align:middle;">
                    <img src="career.png" alt="Career Journey Logo" style="height:48px;width:auto;display:inline-block;vertical-align:middle;" />
                </span>
                Career Journey
            </h2>
            <div class="flex flex-col md:flex-row gap-12">
                <div class="w-full md:w-1/3">
                    <div id="timeline" class="relative border-l-4 border-slate-800 ml-9">
                    </div>
                </div>
                <div class="w-full md:w-2/3">
                    <div id="experience-details" class="bg-slate-900 p-8 rounded-xl shadow-md transition-all duration-500 min-h-[300px]">
                    </div>
                </div>
            </div>
        </section>
        <section id="skills" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-200 mb-4 text-center">
                <span class="inline-block align-middle" style="margin-right:0.5rem;vertical-align:middle;">
                    <img src="Skills.jpg" alt="Skills Logo" style="height:48px;width:auto;display:inline-block;vertical-align:middle;" />
                </span>
                Skills & Expertise
            </h2>
            <div class="flex flex-col md:flex-row gap-4 bg-slate-900 p-4 rounded-xl shadow-md max-w-full mx-auto">
                <!-- CAD & CAE Simulation Skills -->
                <div class="flex-1 min-w-[180px] max-w-xs p-2">
                    <h3 class="text-lg font-semibold text-slate-200 mb-2 text-center">CAD & CAE Simulation</h3>
                    <div class="space-y-2">
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>3DX</span><span>60%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:60%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Abaqus</span><span>70%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:70%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Adams</span><span>60%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:60%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Ansys</span><span>50%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:50%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Catia V5</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:75%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>NX</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:75%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Solidworks</span><span>70%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-blue-500 h-2 rounded-full" style="width:70%"></div></div></div>
                    </div>
                </div>
                <!-- Personal (Soft) Skills -->
                <div class="flex-1 min-w-[180px] max-w-xs p-2">
                    <h3 class="text-lg font-semibold text-slate-200 mb-2 text-center">Personal</h3>
                    <div class="space-y-2">
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Communication</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Teamwork</span><span>90%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width:90%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Creativity</span><span>90%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width:90%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Leadership</span><span>90%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width:90%"></div></div></div>
						<div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Dedication</span><span>100%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-green-500 h-2 rounded-full" style="width:100%"></div></div></div>
                    </div>
                </div>
                <!-- Software and Validation Skills -->
                <div class="flex-1 min-w-[180px] max-w-xs p-2">
                    <h3 class="text-lg font-semibold text-slate-200 mb-2 text-center">Software and Validation</h3>
                    <div class="space-y-2">
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>CANalyzer</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:75%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Candela Studio</span><span>60%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:60%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Chrysler Diagnostic Application Tool</span><span>50%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:50%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Ford Diagnostic Engineering Tool</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:75%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Ford HMI</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Matlab</span><span>40%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:40%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Simulink</span><span>30%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:30%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Teamcenter</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:75%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>WERS</span><span>75%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-purple-500 h-2 rounded-full" style="width:75%"></div></div></div>
                    </div>
                </div>
                <!-- Programming and Tools -->
                <div class="flex-1 min-w-[180px] max-w-xs p-2">
                    <h3 class="text-lg font-semibold text-slate-200 mb-2 text-center">Programming and Tools</h3>
                    <div class="space-y-2">
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Ford Telematics Cloud Protocol</span><span>30%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width:30%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Github</span><span>70%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width:70%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>IntelliJ</span><span>60%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width:60%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Matlab</span><span>40%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width:40%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Python</span><span>50%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-yellow-500 h-2 rounded-full" style="width:50%"></div></div></div>
                    </div>
                </div>
                <!-- Methodologies -->
                <div class="flex-1 min-w-[180px] max-w-xs p-2">
                    <h3 class="text-lg font-semibold text-slate-200 mb-2 text-center">Methodologies</h3>
                    <div class="space-y-2">
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Six Sigma</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>5D / 8D</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Ishikawa</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Agile</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width:80%"></div></div></div>
                        <div><div class="flex justify-between text-slate-400 text-xs mb-1"><span>Scrum Master</span><span>80%</span></div><div class="w-full bg-slate-800 rounded-full h-2"><div class="bg-red-500 h-2 rounded-full" style="width:80%"></div></div></div>
                    </div>
                </div>
            </div>
        </section>
        <section id="education" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-200 mb-8 text-center">
                <span class="inline-block align-middle" style="margin-right:0.5rem;vertical-align:middle;">
                    <img src="hat.jpg.png" alt="Graduation Hat Logo" style="height:48px;width:auto;display:inline-block;vertical-align:middle;" />
                </span>
                Education
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto">
                <div id="masters-card" class="education-card bg-slate-900 p-6 rounded-xl shadow-md text-center flex flex-col items-center" tabindex="0">
                     <h3 class="text-xl font-semibold text-slate-200 mb-2">Master's Degree, Engineering Business Management</h3>
                     <p class="text-slate-400 mt-1">
                         <img src="Anahuac logo.png" alt="Anahuac Logo" style="width:32px;height:32px;display:inline-block;vertical-align:middle;margin-right:0.5rem;" />
                         Universidad Anáhuac México Norte
                     </p>
                     <p class="text-slate-400 font-medium mt-2">2023 - 2025</p>
                 </div>
                <div id="auto-systems-card" class="education-card bg-slate-900 p-6 rounded-xl shadow-md text-center flex flex-col items-center" tabindex="0" title="View Diploma">
                     <h3 class="text-xl font-semibold text-slate-200 mb-2">Automotive Systems Engineer</h3>
                     <p class="text-slate-400 mt-1">
                         <img src="ipn.png" alt="IPN Logo" style="width:48px;height:32px;display:inline-block;vertical-align:middle;margin-right:0.5rem;object-fit:contain;" />
                         Instituto Politécnico Nacional
                     </p>
                     <p class="text-slate-400 font-medium mt-2">2013 - 2017</p>
                     <p class="mt-3 text-sm text-sky-400 font-medium animate-pulse select-none pointer-events-none">Click here to show degree</p>
                 </div>
             </div>
         </section>
        <!-- Diploma Modal -->
        <div id="diploma-modal" class="fixed inset-0 bg-slate-950/80 backdrop-blur-sm hidden z-50 flex justify-center items-center p-4" aria-modal="true" role="dialog" aria-labelledby="diploma-title">
            <div class="modal-panel bg-slate-900 p-6 rounded-xl shadow-lg relative max-w-3xl w-full border border-slate-800">
                <button id="close-diploma" class="absolute top-4 right-4 text-slate-400 hover:text-slate-200 transition-colors" aria-label="Close diploma viewer">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
                <h3 id="diploma-title" class="text-2xl font-bold text-slate-200 mb-4 text-center">Automotive Systems Engineer Diploma</h3>
                <div class="w-full h-[70vh]">
                    <iframe id="diploma-frame" class="w-full h-full rounded-lg" title="Diploma PDF" loading="lazy" frameborder="0"></iframe>
                </div>
                <p class="text-xs text-slate-500 mt-2 text-center">If the PDF does not display, <a id="diploma-direct" href="GNZ_ Automotive Engineering_Title_Diploma.pdf" target="_blank" class="text-sky-400 underline">open it in a new tab</a>.</p>
            </div>
        </div>
        <section id="interests" class="mb-16 md:mb-24">
            <h2 class="text-4xl font-bold text-slate-200 mb-6 text-center"><span class="inline-block align-middle"><svg class="heart-icon heart-icon--small" viewBox="0 0 24 24" fill="red" xmlns="http://www.w3.org/2000/svg" aria-label="Heart icon"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41 0.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg></span>Interests</h2>
            <p class="text-center text-slate-200 text-lg max-w-3xl mx-auto mb-8">First of all I love music; techno and classic music are my favorites. Enjoy watching movies and playing videogames with my buddies. I spend much of my free time learning new things and exploring creative projects.</p>
            <div class="interest-row">
                <div class="interest-action-block">
                    <div class="interest-card anim-1" id="music-card">
                        <img src="Images for CV/music.svg" alt="Music" />
                        <p>Music</p>
                        <div id="music-panel" class="music-panel hidden">
                            <h4 class="panel-title">Favorite Artists</h4>
                            <ul class="artist-list">
                                <li data-artist="beatles">The Beatles</li>
                                <li data-artist="beegees">Bee Gees</li>
                                <li data-artist="drake">Drake</li>
                                <li data-artist="marco">Marco Antonio Solís</li>
                                <li data-artist="weeknd">The Weeknd</li>
                                <li data-artist="postmalone">Post Malone</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="interest-action-block">
                    <div class="interest-card anim-2" id="gaming-card">
                        <img src="Images for CV/xbox.svg" alt="Gaming" />
                        <p>Gaming</p>
                        <div id="gaming-panel" class="music-panel hidden">
                            <h4 class="panel-title">Favorite Games</h4>
                            <div class="space-y-4 text-slate-200 text-sm">
                                <div>
                                    <p class="uppercase tracking-wide text-[11px] text-sky-400 font-semibold mb-1">Xbox</p>
                                    <ul class="artist-list">
                                        <li>Halo</li>
                                        <li>Gears of War</li>
                                        <li>Crash Bandicoot</li>
                                        <li>GTA V</li>
                                        <li>Warzone</li>
                                    </ul>
                                </div>
                                <div>
                                    <p class="uppercase tracking-wide text-[11px] text-sky-400 font-semibold mb-1">Nintendo</p>
                                    <ul class="artist-list">
                                        <li>Super Smash Bros. Ultimate</li>
                                        <li>Mario Party</li>
                                        <li>Mario Kart</li>
                                        <li>The Legend of Zelda</li>
                                        <li>Pokémon</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="interest-action-block">
                    <div class="interest-card anim-3" id="photography-card">
                        <img src="Images for CV/camaron.svg" alt="Photography" />
                        <p>Photography</p>
                        <div id="photography-panel" class="music-panel hidden">
                            <h4 class="panel-title">Photo Album</h4>
                            <div class="grid grid-cols-2 gap-2 w-full photo-album-grid">
                                <figure class="relative w-full aspect-square overflow-hidden rounded-md bg-slate-800/40">
                                    <img src="red.jpg" alt="Red night light scene" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full aspect-square overflow-hidden rounded-md bg-slate-800/40">
                                    <img src="rueda.jpg" alt="Ferris wheel illuminated" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full aspect-square overflow-hidden rounded-md bg-slate-800/40">
                                    <img src="three.jpg" alt="Ancient hollow tree" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full aspect-square overflow-hidden rounded-md bg-slate-800/40">
                                    <img src="Buda horse.jpg" alt="Equestrian statue at night" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="interest-action-block">
                    <div class="interest-card anim-4" id="tennis-card">
                        <img src="Images for CV/tenis.svg" alt="Tennis" />
                        <p>Tennis</p>
                        <div id="tennis-panel" class="music-panel hidden">
                            <h4 class="panel-title">Tennis</h4>
                            <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 mt-2">
                                <img src="GNZ-Tenis.jfif" alt="Playing tennis" class="h-auto object-cover tennis-preview-img" style="max-width:110px; width:100%; margin:0 auto; display:block; border-radius:6px;" loading="lazy" />
                            </figure>
                            <div class="mt-3">
                                <video id="tennis-video" class="w-full rounded-md bg-black/40" src="Clay.mp4" preload="metadata" muted playsinline loop style="max-height:240px; object-fit:cover;">
                                    Your browser does not support the video tag.
                                </video>
                                <video id="tennis-video-2" class="w-full rounded-md bg-black/40 mt-2" src="dura.mp4" preload="metadata" muted playsinline loop style="max-height:240px; object-fit:cover;">
                                    Your browser does not support the video tag.
                                </video>
                            </div>
                            <!-- If the correct file name differs, update the src attribute accordingly -->
                        </div>
                    </div>
                </div>
                <div class="interest-action-block">
                    <div class="interest-card anim-5" id="traveling-card">
                        <img src="Images for CV/plane.svg" alt="Traveling" />
                        <p>Traveling</p>
                        <div id="traveling-panel" class="music-panel hidden">
                            <h4 class="panel-title">Traveling</h4>
                            <div class="grid grid-cols-3 gap-2 w-full travel-album-grid mini-travel-grid">
                                <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 travel-thumb">
                                    <img src="parlament.jpg" alt="Parliament building" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 travel-thumb">
                                    <img src="Turquey.jpg" alt="Turkey landscape" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 travel-thumb">
                                    <img src="Buda.jpg" alt="Buda view" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 travel-thumb col-span-2">
                                    <img src="dinamita.jpg" alt="Fireworks or dynamite art" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                                <figure class="relative w-full overflow-hidden rounded-md bg-slate-800/40 travel-thumb">
                                    <img src="libros.jpg" alt="Books scene" class="w-full h-full object-cover" loading="lazy" />
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="interest-action-block">
                    <div class="interest-card anim-6" id="movies-card">
                        <img src="Images for CV/film.svg" alt="Movies" />
                        <p>Movies</p>
                        <div id="movies-panel" class="music-panel hidden">
                            <h4 class="panel-title">Favorite Movies</h4>
                            <ul class="artist-list">
                                <li>Inception</li>
                                <li>Interstellar</li>
                                <li>Inglourious Basterds</li>
                                <li>The Matrix</li>
                                <li>Parasite</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <section id="freelancer-portfolio" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-200 mb-8 text-center">FreeLancer Portafolio</h2>
            <div class="max-w-5xl mx-auto grid gap-8 md:grid-cols-2 lg:grid-cols-3">
                <div class="group relative portfolio-card-custom rounded-xl p-5 transition-colors cursor-pointer portfolio-card" data-portfolio="motorcycle">
                    <h3 class="text-lg font-semibold text-slate-100 mb-2">Concept design of a motorcycle</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Conceptual CAD assembly modeling and visualization of a custom bike. Click to preview renders.</p>
                    <span class="inline-block mt-3 text-xs tracking-wide text-sky-400/80">CATIA • CAD • Visualization</span>
                    <div class="absolute inset-0 rounded-xl pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity bg-gradient-to-br from-sky-500/10 to-transparent"></div>
                </div>
                <div id="variable-table-card" class="group relative portfolio-card-custom rounded-xl p-5 transition-colors cursor-pointer">
                    <h3 class="text-lg font-semibold text-slate-100 mb-2">Variable height table</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Adjustable elevation table concept. Hover to preview assets, click to play video. Includes mechanical drawing PDF.</p>
                    <span class="inline-block mt-3 text-xs tracking-wide text-sky-400/80">Mechanism • CAD • Prototype</span>
                    <div class="absolute inset-0 rounded-xl pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity bg-gradient-to-br from-sky-500/10 to-transparent"></div>
                    <!-- Hover panel -->
                    <div id="table-panel" class="hidden absolute left-1/2 top-full mt-3 w-[380px] -translate-x-1/2 bg-slate-900/95 border border-slate-700 rounded-xl shadow-lg p-4 z-30">
                        <h4 class="text-xs font-semibold uppercase tracking-wide text-sky-400 mb-2">Quick View</h4>
                        <div class="space-y-3">
                            <div class="aspect-video w-full bg-slate-800/60 rounded-lg flex items-center justify-center overflow-hidden">
                                <video id="table-video" class="w-full h-full object-cover" preload="none" controlslist="nodownload" tabindex="-1" muted>
                                    <source data-src="Mesa.mp4" type="video/mp4" />
                                    Your browser does not support HTML5 video.
                                </video>
                            </div>
                            <div class="w-full h-40 bg-slate-800/40 rounded-lg overflow-hidden relative">
                                <iframe id="table-pdf-frame" class="w-full h-full" title="Variable height table drawings" loading="lazy"></iframe>
                                <div class="absolute inset-0 flex items-center justify-center text-xs text-slate-400" id="table-pdf-loading">Loading PDF...</div>
                            </div>
                            <a id="table-pdf-link" href="Planos mesa elevadora.pdf" target="_blank" class="block text-center text-xs text-sky-400 underline">Open drawings in new tab</a>
                            <p class="text-[10px] text-slate-500 text-center">Hover shows preview. Click card or video to play.</p>
                        </div>
                    </div>
                </div>
                <div id="car-windtunnel-card" class="group relative portfolio-card-custom rounded-xl p-5 transition-colors cursor-pointer portfolio-card" data-portfolio="car">
                    <h3 class="text-lg font-semibold text-slate-100 mb-2">Concept car wind tunnel testing - Fluent - Ansys</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Aerodynamic surface modeling and CFD (ANSYS Fluent) flow visualization. Hover or click to open assets.</p>
                    <span class="inline-block mt-3 text-xs tracking-wide text-sky-400/80">Surface Modeling • CFD • ANSYS</span>
                    <div class="absolute inset-0 rounded-xl pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity bg-gradient-to-br from-sky-500/10 to-transparent"></div>
                </div>
            </div>
            
        </section>
        <!-- Certifications Section -->
        <section id="certifications-section" class="mb-16 md:mb-24">
            <h2 class="text-3xl md:text-4xl font-bold text-slate-200 mb-8 text-center">Certifications</h2>
            <div id="certifications" class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3 max-w-5xl mx-auto"></div>
        </section>
        <!-- Portfolio Image Modal (dynamic) -->
        <div id="portfolio-modal" class="fixed inset-0 bg-slate-950/85 backdrop-blur-sm hidden z-50 flex justify-center items-center p-4" role="dialog" aria-modal="true" aria-labelledby="portfolio-modal-title">
            <div class="relative bg-slate-900 border border-slate-800 rounded-xl shadow-xl max-w-5xl w-full p-6 flex flex-col gap-6">
                <button id="close-portfolio" class="absolute top-4 right-4 text-slate-400 hover:text-slate-200" aria-label="Close image viewer">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/></svg>
                </button>
                <h3 id="portfolio-modal-title" class="text-2xl font-bold text-slate-200 text-center"></h3>
                <div id="portfolio-modal-grid" class="grid md:grid-cols-2 gap-4"></div>
                <p id="portfolio-modal-caption" class="text-xs text-slate-500 text-center"></p>
            </div>
        </div>
    </main>
    <!-- Modal for Contact Information -->
    <div id="contact-modal" class="fixed inset-0 bg-slate-950/80 backdrop-blur-sm hidden z-50 flex justify-center items-center p-4">
        <div class="bg-slate-900 p-8 rounded-xl shadow-lg relative max-w-sm w-full border border-slate-800">
            <button id="close-modal" class="absolute top-4 right-4 text-slate-400 hover:text-slate-200 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            <h3 class="text-2xl font-bold text-slate-200 mb-6 text-center">Contact Information</h3>
            <div class="flex flex-col items-center gap-6">
                <a href="mailto:gilnavazaragoza@gmail.com" class="font-semibold text-slate-200 hover:text-white transition-colors flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884zM18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                    </svg>
                    gilnavazaragoza@gmail.com
                </a>
                <a href="tel:+527449090832" class="font-semibold text-slate-200 hover:text-white transition-colors flex items-center">
                    <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.741 4.451a1 1 0 01-.54 1.06l-1.548.774a11.096 11.096 0 005.432 5.432l.774-1.548a1 1 0 011.06-.54l4.451.741a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"></path>
                    </svg>
                    +527449090832
                </a>
            </div>
        </div>
    </div>
    <footer id="footer" class="bg-slate-900 mt-16 md:mt-24">
        <div class="container mx-auto px-6 py-8 text-center text-slate-400">
            <div class="flex flex-col items-center gap-2">
                <p class="text-lg font-semibold">Let's connect</p>
                <p class="max-w-prose">I'm always open to discussing new opportunities and challenges in the automotive industry.</p>
                <a href="https://www.linkedin.com/in/GilNavaZaragoza" target="_blank" class="flex items-center gap-2 text-slate-400 hover:text-white transition-colors">
                    <!-- Improved LinkedIn SVG logo -->
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 32 32" fill="currentColor">
                        <rect x="2" y="2" width="28" height="28" rx="6" fill="#0A66C2" />
                        <path d="M10.5 13.5h3v8h-3v-8zm1.5-4a1.5 1.5 0 110 3 1.5 1.5 0 010-3zm4 4h2.8v1.1h.04c.39-.74 1.34-1.51 2.76-1.51 2.95 0 3.5 1.94 3.5 4.47v4.93h-3v-4.38c0-1.04-.02-2.38-1.45-2.38-1.45 0-1.67 1.13-1.67 2.3v4.46h-3v-8z" fill="#fff" />
                    </svg>
                    <span class="font-semibold text-slate-200 ml-2">GilNavaZaragoza</span>
                </a>
            </div>
        </div>
    </footer>
    <!-- Global hover image preview container -->
    <div id="image-hover-preview"><img alt="Preview" /></div>
    <script>
        const experienceData = [
            {
                id: 'ford-switches',
                company: 'Ford',
                role: 'Switches Applications Engineer',
                period: 'November 2023 - Present',
                details: [
                    'Manage five vehicle line projects, resolving issues related to switch application systems across current and new models, improving on-time quality delivery by 25%.',
                    'Develop and implement cost and complexity reduction initiatives for switches, increasing assembly line efficiency and saving over $2.5M per year during production phases.',
                    'Generate and present ICA/PCA alternative matrix analyses to senior management, strategically mitigating body interior switch-related build stoppages.',
                    'Lead the 25MY new model launch at the Ohio and Kentucky Truck Assembly Plants (8 months in Louisville, KY; 4 months in Cleveland, OH).',
                    'Direct cross-functional body interior assessments (Appearance Approval, Blue Tag, and Studio reviews), ensuring cockpit and interior harmony and compliance.',
                    'Audit bill of materials (BOM) and manage change control to maintain product accuracy and compliance.'
                ]
            },
            {
                id: 'ford-steering',
                company: 'Ford',
                role: 'Steering Applications Engineer',
                period: 'November 2022 - November 2023',
                details: [
                    'Collaborate with counterparts in Ford North America and Ford of Europe to validate, launch, and maintain Electric Power Assisted Steering (EPAS) systems, including steering column, intermediate shaft, floor seal, gear & linkage assembly, and heat shield.',
                    'Monitor warranty performance of steering components, driving design improvements to resolve issues and prevent recurrence.',
                    'Identify cost-saving opportunities within components and implement more efficient solutions in partnership with suppliers (Bosch, ZF, Thyssenkrupp).',
                    'Coordinate bill of materials (BOM) and change control for delegated parts, ensuring accuracy and compliance.',
                    'Analyze the impact of proposed design and production changes on system performance and compliance with engineering standards.',
                    'Contribute to the successful implementation of EPAS running change screws in current vehicle production at the Hermosillo Stamping & Assembly Plant (4 months supporting new model launches).',
                    'Develop innovation disclosures to enhance current product designs.'
                ]
            },
            {
                id: 'ford-powertrain',
                company: 'Ford',
                role: 'Powertrain Controls Engineer',
                period: 'June 2021 - November 2022',
                details: [
                    'Integrate sub-system calibrations for high-performance ICE and EV propulsion software, ensuring compliance with global emissions standards for Ford and Lincoln vehicles.',
                    'Support and develop powertrain calibrations for ECU-controlled actuators and sensors (PCM, TCM, DLCM) using Candela Studio and CANape Vector tools.',
                    'Optimize the calibration process by designing and implementing Python-based GUIs, reducing calibration time by 25%.',
                    'Manage and maintain project tools to support collaborative data analysis initiatives.'
                ]
            },
            {
                id: 'ford-infotainment',
                company: 'Ford',
                role: 'Infotainment and Connectivity Engineer',
                period: 'May 2018 - October 2020',
                details: [
                    'Verify connectivity of multiple ECUs (TCU, IPC, SYNC, APIM, BCM) in alignment with Ford and Lincoln electronic architectures and global specifications.',
                    'Identify software defects for the FordPass app through root cause analysis and defect classification.',
                    'Validate, report, and track infotainment software bugs with suppliers using communication protocols (CAN, CAN FD, Ethernet, LIN, HS, MS).',
                    'Assess software engineering changes resulting from issues found in prior authentication rounds.',
                    'Support and mentor junior engineers through training and technical guidance.'
                ]
            },
            {
                id: 'stellantis-eps',
                company: 'Stellantis',
                role: 'EPS Design and Release Engineer',
                period: 'October 2020 - June 2021',
                details: [
                    'Lead Electronic Power Steering (EPS) software readiness, coordinating with suppliers and product engineers to ensure quality in software releases, flashing processes, material traceability, updates, and calibrations.',
                    'Develop, analyze, and validate DVP&R (Design Verification Plan & Report) in collaboration with steering suppliers (ZF, Nexteer).',
                    'Support End-of-Line and Vehicle Dynamics teams with EPS module calibration.',
                    'Provide chassis engineering support during prototype pilot launches at the Saltillo Van Assembly Plant, implementing ICA/PCA solutions for steering and chassis issues on RAM ProMaster ICE/EV (2023) and RAM 1500/2500 (2023).',
                    'Audit and update Bill of Materials (BOM) to reflect engineering changes (DCR / TVM / SQ), ensuring correct part levels and usage.'
                ]
            }
        ];
        const certificationsData = [
            { name: '6-Sigma Green Belt', icon: '&#9989;' },
            { name: 'HEV Electrified Powertrain Calibration', icon: '&#9881;' },
            { name: 'International Software Testing Qualifications Board', icon: '&#128220;' },
            { name: 'Python Programming Masterclass (Ford - Udemy Academy)', icon: '&#128187;' },
            { name: 'Agile and Scrum Master', icon: '&#128260;' }
        ];
        const skillsData = {
            labels: ['CAD/CAE & Simulation', 'Software & Validation', 'Programming & Tools', 'Methodologies'],
            datasets: [{
                label: 'Skills',
                data: [5, 4, 4, 3],
                backgroundColor: '#3B82F6',
                borderColor: '#60A5FA',
                borderWidth: 1,
                borderRadius: 4,
                barThickness: 30,
            }]
        };
        const skillsDetails = [
            ['3DX', 'Abaqus', 'Adams', 'Ansys', 'Catia V5', 'NX', 'Solidworks'],
            ['CANalyzer', 'Candela Studio', 'Chrysler Diagnostic App Tool', 'Ford Diagnostic Engineering Tool', 'Ford HMI', 'Matlab', 'Simulink', 'Teamcenter', 'WERS'],
            ['Ford Telematics Cloud Protocol', 'GitHub', 'IntelliJ', 'Matlab', 'Semi Automatic Testing Tool', 'Simulink', 'Python'],
            ['6-Sigma Green Belt', '8D', '5D', 'Ishikawa', 'Agile', 'Scrum Master']
        ];
        document.addEventListener('DOMContentLoaded', function () {
            // Theme toggle logic
            function applyTheme(theme) {
                const root = document.documentElement;
                const themeIcon = document.getElementById('theme-icon');
                if (theme === 'light') {
                    root.classList.add('light');
                    themeIcon.innerHTML = '<path d="M6.76 4.84l-1.8-1.79L3.17 5.84l1.79 1.79 1.8-2.79zM1 13h3v-2H1v2zm10-9h2V1h-2v3zm7.03 1.05l-1.79-1.79-1.8 1.79 1.79 1.8 1.8-1.8zM17 13h3v-2h-3v2zM12 22c.55 0 1-.45 1-1v-3h-2v3c0 .55.45 1 1 1zM4.24 19.16l1.8 1.79 1.79-1.79-1.79-1.8-1.8 1.8zM12 6a6 6 0 100 12 6 6 0 000-12z"/>';
                } else {
                    root.classList.remove('light');
                    themeIcon.innerHTML = '<path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" />';
                }
                localStorage.setItem('theme', theme);
            }
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            const savedTheme = localStorage.getItem('theme');
            const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            const initialTheme = savedTheme ? savedTheme : (prefersDark ? 'dark' : 'light');
            applyTheme(initialTheme);
            themeToggle.addEventListener('click', function () {
                const active = document.documentElement.classList.contains('light') ? 'light' : 'dark';
                applyTheme(active === 'light' ? 'dark' : 'light');
            });

            // Career Journey timeline logic
            const timelineContainer = document.getElementById('timeline');
            const detailsContainer = document.getElementById('experience-details');
            // Render timeline items
            timelineContainer.innerHTML = '';
            experienceData.forEach((job, index) => {
                const item = document.createElement('div');
                item.className = `timeline-item relative pl-8 pb-12 cursor-pointer${index === 0 ? ' active' : ''}`;
                item.dataset.id = job.id;
                item.innerHTML = `
                        <h3 class="text-lg font-semibold text-slate-200">${job.role}</h3>
                        <p class="text-md text-slate-400">${job.company}</p>
                        <p class="text-sm text-slate-500">${job.period}</p>
                    `;
                timelineContainer.appendChild(item);
            });
            function updateDetails(id) {
                const job = experienceData.find(j => j.id === id);
                if (job) {
                    detailsContainer.innerHTML = `
                            <h3 class="text-2xl font-bold text-slate-200 mb-2">${job.role}</h3>
                            <p class="text-lg font-medium text-slate-400 mb-1">${job.company}</p>
                            <p class="text-md text-slate-500 mb-6">${job.period}</p>
                            <ul class="space-y-3 list-disc list-inside text-slate-300">
                                ${job.details.map(d => `<li>${d}</li>`).join('')}
                            </ul>
                        `;
                }
            }
            timelineContainer.addEventListener('click', function (e) {
                const targetItem = e.target.closest('.timeline-item');
                if (targetItem) {
                    timelineContainer.querySelectorAll('.timeline-item').forEach(item => item.classList.remove('active'));
                    targetItem.classList.add('active');
                    updateDetails(targetItem.dataset.id);
                }
            });
            updateDetails(experienceData[0].id);

            // Other UI logic (contact modal, mobile menu, certifications)
            const certificationsContainer = document.getElementById('certifications');
            if (certificationsContainer) {
                certificationsContainer.innerHTML = '';
                certificationsData.forEach(cert => {
                    const item = document.createElement('div');
                    item.className = 'bg-slate-900 p-4 rounded-lg shadow-sm flex items-center gap-4';
                    item.innerHTML = `
                            <div class="text-2xl text-slate-400">${cert.icon}</div>
                            <p class="font-semibold text-slate-300">${cert.name}</p>
                        `;
                    certificationsContainer.appendChild(item);
                });
            }
            const mobileMenuBtn = document.getElementById('menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const openContactModalBtn = document.getElementById('open-contact-modal');
            const openContactModalMobileBtn = document.getElementById('open-contact-modal-mobile');
            const contactModal = document.getElementById('contact-modal');
            const closeModalBtn = document.getElementById('close-modal');
            mobileMenuBtn.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            openContactModalBtn.addEventListener('click', () => {
                contactModal.classList.remove('hidden');
            });
            openContactModalMobileBtn.addEventListener('click', () => {
                contactModal.classList.remove('hidden');
                mobileMenu.classList.add('hidden');
            });
            closeModalBtn.addEventListener('click', () => {
                contactModal.classList.add('hidden');
            });
            contactModal.addEventListener('click', (e) => {
                if (e.target.id === 'contact-modal') {
                    contactModal.classList.add('hidden');
                }
            });

            // Chart.js code
            const ctx = document.getElementById('skillsChart') ? document.getElementById('skillsChart').getContext('2d') : null;
            if (ctx) {
                const skillsChart = new Chart(ctx, {
                    type: 'bar',
                    data: skillsData,
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                display: false
                            },
                            tooltip: {
                                callbacks: {
                                    label: function (context) {
                                        let label = context.dataset.label || '';
                                        if (label) {
                                            label += ': ';
                                        }
                                        const details = skillsDetails[context.dataIndex];
                                        return details ? details.join(', ') : '';
                                    }
                                },
                                backgroundColor: '#1E293B',
                                titleFont: { size: 14 },
                                bodyFont: { size: 12 },
                                padding: 10,
                                displayColors: false,
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    display: false,
                                    drawBorder: false,
                                },
                                ticks: {
                                    display: false,
                                }
                            },
                            y: {
                                grid: {
                                    display: false,
                                    drawBorder: false,
                                },
                                ticks: {
                                    font: {
                                        size: 14,
                                        weight: '500',
                                    },
                                    color: '#94A3B8'
                                }
                            }
                        }
                    }
                });
            }
        });
        // Profile picture animation for 3 seconds on hover
        document.addEventListener('DOMContentLoaded', function () {
            const profilePic = document.querySelector('.profile-pic');
            let pulseTimeout;
            if (profilePic) {
                profilePic.addEventListener('mouseenter', function () {
                    // Apply one-time 2s zoom animation
                    profilePic.style.animation = 'profile-zoom-once 2s ease';
                });
                profilePic.addEventListener('mouseleave', function () {
                    // If user leaves early, reset to normal
                    profilePic.style.animation = '';
                });
                profilePic.addEventListener('animationend', function(e){
                    if(e.animationName === 'profile-zoom-once') {
                        profilePic.style.animation = '';
                    }
                });
            }
            // Interest card selection animation
            document.querySelectorAll('.interest-card').forEach(card => {
                card.addEventListener('mouseenter', function () {
                    card.classList.add('selected');
                });
                card.addEventListener('mouseleave', function () {
                    card.classList.remove('selected');
                });
            });

            // Music panel + audio preview logic
            const musicCard = document.getElementById('music-card');
            const musicPanel = document.getElementById('music-panel');
            let panelHover = false;
            if (musicCard && musicPanel) {
                let positioned = false;
                function positionPanel(){
                    if(!musicCard || !musicPanel) return;
                    if(!positioned){
                        // Move panel to body so it doesn't affect card stacking/layout
                        document.body.appendChild(musicPanel);
                        musicPanel.classList.add('detached');
                        positioned = true;
                    }
                    musicPanel.style.visibility = 'hidden';
                    musicPanel.classList.remove('hidden');
                    // Compute desired position
                    const cardRect = musicCard.getBoundingClientRect();
                    const panelRect = musicPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    // Prefer showing below
                    let top = cardRect.bottom + 12 + window.scrollY;
                    // If panel would overlap the portfolio cards area (appear inside it), and there's space above, show above
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16){
                            top = aboveTop;
                        }
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    // Constrain horizontally
                    const margin = 8;
                    if(left < margin) left = margin;
                    const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin;
                    if(left > maxLeft) left = maxLeft;
                    musicPanel.style.top = top + 'px';
                    musicPanel.style.left = left + 'px';
                    musicPanel.style.visibility = 'visible';
                    musicPanel.style.zIndex = 60; // above portfolio cards
                }
                const showPanel = () => { positionPanel(); };
                const hidePanel = () => { if(!panelHover) musicPanel.classList.add('hidden'); };
                musicCard.addEventListener('mouseenter', showPanel);
                musicCard.addEventListener('mouseleave', () => setTimeout(hidePanel,150));
                musicPanel.addEventListener('mouseenter', ()=> { panelHover = true; });
                musicPanel.addEventListener('mouseleave', ()=> { panelHover = false; musicPanel.classList.add('hidden'); stopAllAudio(); });
                // Reposition on window resize/scroll if visible
                window.addEventListener('scroll', ()=>{ if(!musicPanel.classList.contains('hidden')) positionPanel(); }, { passive:true });
                window.addEventListener('resize', ()=>{ if(!musicPanel.classList.contains('hidden')) positionPanel(); });
            }

            // Gaming panel logic (reuses music panel positioning pattern)
            const gamingCard = document.getElementById('gaming-card');
            const gamingPanel = document.getElementById('gaming-panel');
            let gamingHover = false;
            if(gamingCard && gamingPanel){
                let gamingPositioned = false;
                function positionGaming(){
                    if(!gamingPositioned){
                        document.body.appendChild(gamingPanel);
                        gamingPanel.classList.add('detached');
                        gamingPositioned = true;
                    }
                    gamingPanel.style.visibility = 'hidden';
                    gamingPanel.classList.remove('hidden');
                    const cardRect = gamingCard.getBoundingClientRect();
                    const panelRect = gamingPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    let top = cardRect.bottom + 12 + window.scrollY;
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16){ top = aboveTop; }
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    const margin = 8;
                    if(left < margin) left = margin;
                    const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin;
                    if(left > maxLeft) left = maxLeft;
                    gamingPanel.style.top = top + 'px';
                    gamingPanel.style.left = left + 'px';
                    gamingPanel.style.visibility = 'visible';
                    gamingPanel.style.zIndex = 60;
                }
                const showGaming = ()=>{ positionGaming(); };
                const hideGaming = ()=>{ if(!gamingHover) gamingPanel.classList.add('hidden'); };
                gamingCard.addEventListener('mouseenter', showGaming);
                gamingCard.addEventListener('mouseleave', ()=> setTimeout(hideGaming,150));
                gamingPanel.addEventListener('mouseenter', ()=>{ gamingHover = true; });
                gamingPanel.addEventListener('mouseleave', ()=>{ gamingHover = false; gamingPanel.classList.add('hidden'); });
                window.addEventListener('scroll', ()=>{ if(!gamingPanel.classList.contains('hidden')) positionGaming(); }, { passive:true });
                window.addEventListener('resize', ()=>{ if(!gamingPanel.classList.contains('hidden')) positionGaming(); });
            }

            // Photography album panel logic
            const photographyCard = document.getElementById('photography-card');
            const photographyPanel = document.getElementById('photography-panel');
            let photoHover = false;
            if(photographyCard && photographyPanel){
                let photoPositioned = false;
                function positionPhoto(){
                    if(!photoPositioned){
                        document.body.appendChild(photographyPanel);
                        photographyPanel.classList.add('detached');
                        photoPositioned = true;
                    }
                    photographyPanel.style.visibility = 'hidden';
                    photographyPanel.classList.remove('hidden');
                    const cardRect = photographyCard.getBoundingClientRect();
                    const panelRect = photographyPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    let top = cardRect.bottom + 12 + window.scrollY;
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16){ top = aboveTop; }
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    const margin = 8;
                    if(left < margin) left = margin;
                    const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin;
                    if(left > maxLeft) left = maxLeft;
                    photographyPanel.style.top = top + 'px';
                    photographyPanel.style.left = left + 'px';
                    photographyPanel.style.visibility = 'visible';
                    photographyPanel.style.zIndex = 60;
                }
                const showPhoto = ()=>{ positionPhoto(); };
                const hidePhoto = ()=>{ if(!photoHover) photographyPanel.classList.add('hidden'); };
                photographyCard.addEventListener('mouseenter', showPhoto);
                photographyCard.addEventListener('mouseleave', ()=> setTimeout(hidePhoto,150));
                photographyPanel.addEventListener('mouseenter', ()=>{ photoHover = true; });
                photographyPanel.addEventListener('mouseleave', ()=>{ photoHover = false; photographyPanel.classList.add('hidden'); });
                window.addEventListener('scroll', ()=>{ if(!photographyPanel.classList.contains('hidden')) positionPhoto(); }, { passive:true });
                window.addEventListener('resize', ()=>{ if(!photographyPanel.classList.contains('hidden')) positionPhoto(); });
            }

            // Tennis panel logic
            const tennisCard = document.getElementById('tennis-card');
            const tennisPanel = document.getElementById('tennis-panel');
            let tennisHover = false;
            if(tennisCard && tennisPanel){
                let tennisPositioned = false;
                function positionTennis(){
                    if(!tennisPositioned){ document.body.appendChild(tennisPanel); tennisPanel.classList.add('detached'); tennisPositioned = true; }
                    tennisPanel.style.visibility='hidden';
                    tennisPanel.classList.remove('hidden');
                    const cardRect = tennisCard.getBoundingClientRect();
                    const panelRect = tennisPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    let top = cardRect.bottom + 12 + window.scrollY;
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16) top = aboveTop;
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    const margin=8; if(left < margin) left = margin; const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin; if(left>maxLeft) left = maxLeft;
                    tennisPanel.style.top = top + 'px';
                    tennisPanel.style.left = left + 'px';
                    tennisPanel.style.visibility='visible';
                    tennisPanel.style.zIndex=60;
                }
                const showTennis = ()=> positionTennis();
                const hideTennis = ()=> { if(!tennisHover) tennisPanel.classList.add('hidden'); };
                tennisCard.addEventListener('mouseenter', showTennis);
                tennisCard.addEventListener('mouseleave', ()=> setTimeout(hideTennis,150));
                tennisPanel.addEventListener('mouseenter', ()=> { tennisHover = true; });
                tennisPanel.addEventListener('mouseleave', ()=> { 
                    tennisHover = false; 
                    const tv = document.getElementById('tennis-video');
                    if(tv){ tv.pause(); tv.currentTime = 0; }
                    tennisPanel.classList.add('hidden'); 
                });
                // Video autoplay on hover inside panel
                const tennisVideo = document.getElementById('tennis-video');
                const tennisVideo2 = document.getElementById('tennis-video-2');
                [tennisVideo, tennisVideo2].forEach(v => {
                    if(!v) return;
                    v.addEventListener('mouseenter', ()=>{ try { v.play(); } catch(e){} });
                    v.addEventListener('mouseleave', ()=>{ v.pause(); });
                });
                window.addEventListener('scroll', ()=> { if(!tennisPanel.classList.contains('hidden')) positionTennis(); }, { passive:true });
                window.addEventListener('resize', ()=> { if(!tennisPanel.classList.contains('hidden')) positionTennis(); });
            }

            // Traveling panel logic
            const travelingCard = document.getElementById('traveling-card');
            const travelingPanel = document.getElementById('traveling-panel');
            let travelingHover = false;
            if(travelingCard && travelingPanel){
                let travelingPositioned = false;
                function positionTravel(){
                    if(!travelingPositioned){ document.body.appendChild(travelingPanel); travelingPanel.classList.add('detached'); travelingPositioned = true; }
                    travelingPanel.style.visibility='hidden';
                    travelingPanel.classList.remove('hidden');
                    const cardRect = travelingCard.getBoundingClientRect();
                    const panelRect = travelingPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    let top = cardRect.bottom + 12 + window.scrollY;
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16) top = aboveTop;
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    const margin=8; if(left < margin) left = margin; const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin; if(left>maxLeft) left = maxLeft;
                    travelingPanel.style.top = top + 'px';
                    travelingPanel.style.left = left + 'px';
                    travelingPanel.style.visibility='visible';
                    travelingPanel.style.zIndex=60;
                }
                const showTravel = ()=> positionTravel();
                const hideTravel = ()=> { if(!travelingHover) travelingPanel.classList.add('hidden'); };
                travelingCard.addEventListener('mouseenter', showTravel);
                travelingCard.addEventListener('mouseleave', ()=> setTimeout(hideTravel,150));
                travelingPanel.addEventListener('mouseenter', ()=> { travelingHover = true; });
                travelingPanel.addEventListener('mouseleave', ()=> { travelingHover = false; travelingPanel.classList.add('hidden'); });
                window.addEventListener('scroll', ()=> { if(!travelingPanel.classList.contains('hidden')) positionTravel(); }, { passive:true });
                window.addEventListener('resize', ()=> { if(!travelingPanel.classList.contains('hidden')) positionTravel(); });
            }

            // Movies panel logic
            const moviesCard = document.getElementById('movies-card');
            const moviesPanel = document.getElementById('movies-panel');
            let moviesHover = false;
            if(moviesCard && moviesPanel){
                let moviesPositioned = false;
                function positionMovies(){
                    if(!moviesPositioned){ document.body.appendChild(moviesPanel); moviesPanel.classList.add('detached'); moviesPositioned = true; }
                    moviesPanel.style.visibility='hidden';
                    moviesPanel.classList.remove('hidden');
                    const cardRect = moviesCard.getBoundingClientRect();
                    const panelRect = moviesPanel.getBoundingClientRect();
                    const portfolioSection = document.getElementById('freelancer-portfolio');
                    const portfolioTop = portfolioSection ? portfolioSection.getBoundingClientRect().top : window.innerHeight;
                    let top = cardRect.bottom + 12 + window.scrollY;
                    if(top + panelRect.height > portfolioTop + window.scrollY - 8){
                        const aboveTop = cardRect.top - panelRect.height - 12 + window.scrollY;
                        if(aboveTop > window.scrollY + 16) top = aboveTop;
                    }
                    let left = cardRect.left + (cardRect.width/2) - (panelRect.width/2) + window.scrollX;
                    const margin=8; if(left < margin) left = margin; const maxLeft = window.scrollX + window.innerWidth - panelRect.width - margin; if(left>maxLeft) left = maxLeft;
                    moviesPanel.style.top = top + 'px';
                    moviesPanel.style.left = left + 'px';
                    moviesPanel.style.visibility='visible';
                    moviesPanel.style.zIndex=60;
                }
                const showMovies = ()=> positionMovies();
                const hideMovies = ()=> { if(!moviesHover) moviesPanel.classList.add('hidden'); };
                moviesCard.addEventListener('mouseenter', showMovies);
                moviesCard.addEventListener('mouseleave', ()=> setTimeout(hideMovies,150));
                moviesPanel.addEventListener('mouseenter', ()=> { moviesHover = true; });
                moviesPanel.addEventListener('mouseleave', ()=> { moviesHover = false; moviesPanel.classList.add('hidden'); });
                window.addEventListener('scroll', ()=> { if(!moviesPanel.classList.contains('hidden')) positionMovies(); }, { passive:true });
                window.addEventListener('resize', ()=> { if(!moviesPanel.classList.contains('hidden')) positionMovies(); });
            }

            // Original-size hover image preview (photo & travel albums)
            const hoverPreviewContainer = document.getElementById('image-hover-preview');
            const hoverPreviewImg = hoverPreviewContainer ? hoverPreviewContainer.querySelector('img') : null;
            function attachPreview(gridSelector){
                const grid = document.querySelector(gridSelector);
                if(!grid) return;
                const isPhotoAlbum = gridSelector === '.photo-album-grid' || gridSelector === '.travel-album-grid';
                grid.querySelectorAll('img').forEach(img => {
                    img.addEventListener('mouseenter', ()=>{
                        if(!hoverPreviewContainer || !hoverPreviewImg) return;
                        hoverPreviewImg.src = img.src;
                        hoverPreviewImg.alt = img.alt || 'Preview';
                        // Half-size logic for photo album images
                        if(isPhotoAlbum){
                            hoverPreviewContainer.style.width = 'auto';
                            hoverPreviewContainer.style.height = 'auto';
                            hoverPreviewImg.style.maxWidth = '40vw';
                            hoverPreviewImg.style.maxHeight = '40vh';
                        } else {
                            // default (original) sizing behavior
                            hoverPreviewImg.style.maxWidth = '80vw';
                            hoverPreviewImg.style.maxHeight = '80vh';
                        }
                        hoverPreviewContainer.style.display = 'block';
                    });
                    img.addEventListener('mousemove', (e)=>{
                        if(!hoverPreviewContainer) return;
                        const padding = 18;
                        let x = e.clientX + 24;
                        let y = e.clientY + 24;
                        const vpW = window.innerWidth;
                        const vpH = window.innerHeight;
                        const rect = hoverPreviewContainer.getBoundingClientRect();
                        if(x + rect.width + padding > vpW){ x = e.clientX - rect.width - 24; }
                        if(y + rect.height + padding > vpH){ y = e.clientY - rect.height - 24; }
                        hoverPreviewContainer.style.left = x + 'px';
                        hoverPreviewContainer.style.top = y + 'px';
                    });
                    img.addEventListener('mouseleave', ()=>{
                        if(!hoverPreviewContainer) return;
                        hoverPreviewContainer.style.display = 'none';
                        hoverPreviewImg.src = '';
                    });
                });
            }
            attachPreview('.photo-album-grid');
            attachPreview('.travel-album-grid');

            // Create audio map (placeholders). Replace src with your own short fair-use or licensed clips.
            const artistAudioSources = {
                beatles: 'audio/beatles.mp3',
                beegees: 'audio/beegees.mp3',
                drake: 'audio/drake.mp3',
                marco: 'audio/marco.mp3',
                weeknd: 'audio/weeknd.mp3',
                postmalone: 'audio/postmalone.mp3'
            };
            const audioElements = {};
            Object.entries(artistAudioSources).forEach(([key, src]) => {
                const a = document.createElement('audio');
                a.src = src; // Provide small (<=10s) clip.
                a.preload = 'none';
                audioElements[key] = a;
                document.body.appendChild(a);
            });
            function stopAllAudio(){
                Object.values(audioElements).forEach(a=>{ a.pause(); a.currentTime = 0; });
            }
            const artistList = document.querySelectorAll('#music-panel .artist-list li');
            artistList.forEach(item => {
                 const key = item.getAttribute('data-artist');
                 item.addEventListener('mouseenter', () => {
                     stopAllAudio();
                     const audio = audioElements[key];
                     if (audio) { audio.play().catch(()=>{}); }
                 });
                 item.addEventListener('mouseleave', () => {
                     const audio = audioElements[key];
                     if (audio) { audio.pause(); audio.currentTime = 0; }
                 });
                 item.addEventListener('click', () => {
                     // Toggle play/pause on click for accessibility
                     const audio = audioElements[key];
                     if(audio){
                         if(audio.paused){ stopAllAudio(); audio.play().catch(()=>{}); }
                         else { audio.pause(); audio.currentTime = 0; }
                     }
                 });
             });

             // Enhance skill bars: tag structure for hover effects
             document.querySelectorAll('#skills .w-full.bg-slate-800.rounded-full.h-2').forEach(wrapper => {
                 wrapper.classList.add('skill-bar');
                 const fill = wrapper.querySelector('div');
                 if (fill) fill.classList.add('skill-fill');
                 // Per-bar zoom: use the direct parent that contains the label and this bar (wrapper's parent)
                 const row = wrapper.parentElement; // immediate parent holds label/time pair
                 if (row && !row.classList.contains('skill-item')) {
                     row.classList.add('skill-item');
                 }
             });
            
            // Diploma modal logic
            const diplomaModal = document.getElementById('diploma-modal');
            const diplomaFrame = document.getElementById('diploma-frame');
            const closeDiploma = document.getElementById('close-diploma');
            const autoCard = document.getElementById('auto-systems-card');
            const directLink = document.getElementById('diploma-direct');
            let diplomaLoaded = false;
            function loadDiplomaIfNeeded(){
                if(!diplomaLoaded){
                    const pdfPath = 'GNZ_ Automotive Engineering_Title_Diploma.pdf';
                    diplomaFrame.src = encodeURI(pdfPath);
                    directLink.href = encodeURI(pdfPath);
                    diplomaLoaded = true;
                }
            }
            function openDiploma(){
                if(!diplomaModal) return;
                loadDiplomaIfNeeded();
                diplomaModal.classList.remove('hidden');
                closeDiploma.focus();
            }
            function closeDiplomaModal(){
                if(!diplomaModal) return;
                diplomaModal.classList.add('hidden');
                autoCard && autoCard.focus();
            }
            function toggleDiploma(){
                if(!diplomaModal) return;
                if(diplomaModal.classList.contains('hidden')) openDiploma(); else closeDiplomaModal();
            }
            if(autoCard){
                autoCard.addEventListener('click', (e)=>{ e.preventDefault(); toggleDiploma(); });
                autoCard.addEventListener('keydown', (e)=>{
                    if(e.key === 'Enter' || e.key === ' '){
                        e.preventDefault();
                        toggleDiploma();
                    }
                });
            }
            if(closeDiploma){
                closeDiploma.addEventListener('click', (e)=>{ e.preventDefault(); closeDiplomaModal(); });
            }
            if(diplomaModal){
                diplomaModal.addEventListener('click', (e)=> { if(e.target.id === 'diploma-modal') closeDiplomaModal(); });
            }
            document.addEventListener('keydown', (e)=> { if(e.key === 'Escape' && !diplomaModal.classList.contains('hidden')) closeDiplomaModal(); });

            // Portfolio modal logic (dynamic for multiple projects)
            const portfolioModal = document.getElementById('portfolio-modal');
            const closePortfolio = document.getElementById('close-portfolio');
            const modalTitle = document.getElementById('portfolio-modal-title');
            const modalGrid = document.getElementById('portfolio-modal-grid');
            const modalCaption = document.getElementById('portfolio-modal-caption');
            const portfolioCards = document.querySelectorAll('.portfolio-card');
            let lastFocusedEl = null;
            const portfolioData = {
                motorcycle: {
                    title: 'Concept design of a motorcycle',
                    caption: 'Images: Concept assembly modeling (CATIA V5).',
                    images: [
                        { src: 'Moto1.jpg', alt: 'Motorcycle CAD front view', label: 'Perspective view render' },
                        { src: 'Moto2.jpg', alt: 'Motorcycle CAD perspective view', label: 'Front view render' }
                    ]
                },
                car: {
                    title: 'Concept car wind tunnel testing – Fluent – Ansys',
                    caption: 'Images: Surface modeling & CFD (ANSYS Fluent) post-processing.',
                    images: [
                        { src: 'Car surface.jpg', alt: 'Car surface model (surface CAD)', label: 'Surface model' },
                        { src: 'wheels car.png', alt: 'Car with wheels integrated', label: 'Wheels integrated' },
                        { src: 'ansys_wt.png', alt: 'ANSYS Fluent wind tunnel CFD result', label: 'CFD result' }
                    ]
                }
            };
            function buildModalContent(key){
                const data = portfolioData[key];
                if(!data) return;
                modalTitle.textContent = data.title;
                modalCaption.textContent = data.caption;
                modalGrid.innerHTML = '';
                data.images.forEach(img=>{
                    const fig = document.createElement('figure');
                    const labelLower = (img.label || '').toLowerCase();
                    const isCentered = (labelLower === 'cfd result' || labelLower === 'surface model' || labelLower === 'wheels integrated');
                    fig.className = 'bg-slate-800/40 rounded-lg overflow-hidden border border-slate-700 flex flex-col' + (isCentered ? ' items-center justify-center p-3' : '');
                    const imageEl = document.createElement('img');
                    imageEl.loading = 'lazy';
                    imageEl.src = encodeURI(img.src);
                    imageEl.alt = img.alt;
                    imageEl.className = isCentered ? 'object-contain max-w-[360px] w-full h-auto mx-auto' : 'w-full h-full object-cover';
                    const cap = document.createElement('figcaption');
                    cap.className = 'text-xs text-slate-400 p-2 text-center';
                    cap.textContent = img.label;
                    fig.appendChild(imageEl);
                    fig.appendChild(cap);
                    modalGrid.appendChild(fig);
                });
            }
            function openPortfolio(key){
                if(!portfolioModal) return;
                // default to motorcycle if no key
                buildModalContent(key || 'motorcycle');
                lastFocusedEl = document.activeElement;
                portfolioModal.classList.remove('hidden');
                closePortfolio && closePortfolio.focus();
            }
            function closePortfolioModal(){
                if(!portfolioModal) return;
                portfolioModal.classList.add('hidden');
                if(lastFocusedEl) lastFocusedEl.focus();
            }
            portfolioCards.forEach(card => {
                card.setAttribute('tabindex','0');
                card.addEventListener('click', ()=> {
                    const key = card.dataset.portfolio === 'motorcycle' ? 'motorcycle' : (card.id === 'car-windtunnel-card' ? 'car' : 'motorcycle');
                    openPortfolio(key);
                });
                card.addEventListener('keydown', (e)=>{
                    if(e.key === 'Enter' || e.key === ' '){
                        e.preventDefault();
                        const key = card.dataset.portfolio === 'motorcycle' ? 'motorcycle' : (card.id === 'car-windtunnel-card' ? 'car' : 'motorcycle');
                        openPortfolio(key);
                    }
                });
            });
            if(closePortfolio){
                closePortfolio.addEventListener('click', (e)=>{ e.preventDefault(); closePortfolioModal(); });
            }
            if(portfolioModal){
                portfolioModal.addEventListener('click', (e)=> { if(e.target.id === 'portfolio-modal') closePortfolioModal(); });
            }
            document.addEventListener('keydown', (e)=> { if(e.key === 'Escape' && portfolioModal && !portfolioModal.classList.contains('hidden')) closePortfolioModal(); });

            // Hover-to-open quick view modal for car & motorcycle
            const motoCardForModal = document.querySelector('[data-portfolio="motorcycle"]');
            if(motoCardForModal){
                let motoHoverTimer = null;
                let motoHoverOpened = false;
                motoCardForModal.addEventListener('mouseenter', ()=>{
                    if(motoHoverOpened || !portfolioModal || !portfolioModal.classList.contains('hidden')) return;
                    motoHoverTimer = setTimeout(()=>{ openPortfolio('motorcycle'); motoHoverOpened = true; }, 280);
                });
                motoCardForModal.addEventListener('mouseleave', ()=>{
                    if(motoHoverTimer){ clearTimeout(motoHoverTimer); motoHoverTimer = null; }
                    if(portfolioModal.classList.contains('hidden')) motoHoverOpened = false;
                });
            }
            // Existing car hover logic
            const carCardForModal = document.getElementById('car-windtunnel-card');
            if(carCardForModal){
                let carHoverTimer = null;
                let carHoverOpened = false;
                carCardForModal.addEventListener('mouseenter', ()=>{
                    if(carHoverOpened || !portfolioModal || !portfolioModal.classList.contains('hidden')) return;
                    carHoverTimer = setTimeout(()=>{ openPortfolio('car'); carHoverOpened = true; }, 280);
                });
                carCardForModal.addEventListener('mouseleave', ()=>{
                    if(carHoverTimer){ clearTimeout(carHoverTimer); carHoverTimer = null; }
                    if(portfolioModal.classList.contains('hidden')) carHoverOpened = false;
                });
            }

            // Variable height table hover panel logic
            const tableCard = document.getElementById('variable-table-card');
            const tablePanel = document.getElementById('table-panel');
            const tableVideo = document.getElementById('table-video');
            const tablePdfFrame = document.getElementById('table-pdf-frame');
            const tablePdfLoading = document.getElementById('table-pdf-loading');
            let tablePanelHover = false;
            let tableAssetsLoaded = false;
            function loadTableAssets(){
                if(tableAssetsLoaded) return;
                // Set video source
                const source = tableVideo?.querySelector('source[data-src]');
                if(source && !source.src){
                    source.src = 'Mesa.mp4';
                    tableVideo.load();
                }
                // Load PDF
                if(tablePdfFrame && !tablePdfFrame.src){
                    tablePdfFrame.src = encodeURI('Planos mesa elevadora.pdf');
                }
                tableAssetsLoaded = true;
            }
            function showTablePanel(){
                if(!tablePanel) return;
                tablePanel.classList.remove('hidden');
                loadTableAssets();
                // Remove loading overlay when iframe loads
                if(tablePdfFrame){
                    tablePdfFrame.addEventListener('load', ()=> { if(tablePdfLoading) tablePdfLoading.style.display='none'; }, { once:true });
                }
            }
            function hideTablePanel(){
                if(!tablePanel) return;
                tablePanel.classList.add('hidden');
                if(tableVideo){ tableVideo.pause(); }
            }
            if(tableCard && tablePanel){
                tableCard.addEventListener('mouseenter', ()=>{ showTablePanel(); });
                tableCard.addEventListener('mouseleave', ()=>{ setTimeout(()=>{ if(!tablePanelHover) hideTablePanel(); }, 120); });
                tablePanel.addEventListener('mouseenter', ()=>{ tablePanelHover = true; });
                tablePanel.addEventListener('mouseleave', ()=>{ tablePanelHover = false; hideTablePanel(); });
                // Click to play / toggle video
                tableCard.addEventListener('click', ()=> {
                    showTablePanel();
                    if(tableVideo){
                        if(tableVideo.paused){
                            try {
                                if(tableVideo.currentTime < 5) tableVideo.currentTime = 5; // seek to 5s
                            } catch(_){}
                            tableVideo.play().then(()=>{ tableVideo.classList.add('video-zoom-playing'); }).catch(()=>{});
                        } else {
                            tableVideo.pause();
                        }
                    }

                });
                // Keyboard accessibility
                tableCard.setAttribute('tabindex','0');
                tableCard.addEventListener('keydown', (e)=>{
                    if(e.key === 'Enter' || e.key === ' '){
                        e.preventDefault();
                        showTablePanel();
                        if(tableVideo){
                            if(tableVideo.paused){
                                try { if(tableVideo.currentTime < 5) tableVideo.currentTime = 5; } catch(_){}
                                tableVideo.play().then(()=>{ tableVideo.classList.add('video-zoom-playing'); }).catch(()=>{});
                            } else { tableVideo.pause(); }
                        }
                    }
                });
                if(tableVideo){
                    tableVideo.addEventListener('pause', ()=>{ tableVideo.classList.remove('video-zoom-playing'); });
                    tableVideo.addEventListener('ended', ()=>{ tableVideo.classList.remove('video-zoom-playing'); });
                }
            }
         });
    </script>
</body>
</html>


